var HashtagItem,HashtagList;HashtagItem=(function(){function d(f){this.data=f;this.label="truncate"}d.prototype.options=function(f){if(f){if(f.label!==undefined){this.label=f.label}}return this};var c=_.template('<div class="hashtag-item" data-id="<%= data.item.id %>" data-related-ids="<%= data.item.related_ids %>">  <div class="hashtag-circle">    <canvas class="hashtag-level-bar" data-level="<%= data.item.level / 10 %>"/>    <% if (data.item.icon) { %>    <div class="hashtag-icon" style="background-image: url(<%= data.item.icon %>)">    <% } else { %>    <div class="hashtag-icon hashtag-<%= data.type %>" style="<%= data.color %>">    <% } %>      <div class="hashtag-level">        <span><%= data.item.level %></span>      </div>    </div>  </div>  <% if (data.options.label) { %>    <div class="hashtag-label <%= data.options.label == "truncate" && "truncate" || "" %>">      <div>#<%= data.item.name %></div>      <div><%= data.item.energy %></div>    </div>  <% } %></div>',{variable:"data"});var b=["#c51158","#c90200","#e80038","#ea3f2b","#fb3d40","#ff4923","#ea552b","#ff8122","#ffa400","#440c5c","#1d1a72","#02375e","#105299","#005866","#00726f","#05687f","#0e7d9b","#0f5001","#006b00","#138c02","#578e00","#13aa02","#87c400","#79aa00","#97af01","#727272"];var e=function(){var f=Math.floor(Math.random()*b.length);return"background-color:"+b[f]};d.prototype.html=function(){return c({item:this.data,color:e(),type:this.data.primary?"brand":"interest",options:{label:this.label}})};d.drawRadial=function(h){var f=$(h).find("canvas.hashtag-level-bar");var j=f.data("level");var i=10;var g=64;if(j){setTimeout(a,500,f,j,i,g)}};d.prototype.render=function(f){var g=$(this.html()).appendTo(f);d.drawRadial(g);return g};var a=function(h,p,g,l,o){if(o===undefined){o=0.1}var k=0.5,j=0.5;if(o>0.5){j=-(o*0.5)}else{if(o<=0){k=0;j=0}else{j=0.25-(o*0.5)}}var q=h[0].getContext("2d");q.clearRect(0,0,h[0].width,h[0].height);var f=Math.PI/2;var i=o*(Math.PI*2)+Math.PI/2;q.translate(g/2+4,g/2+4);var r=l+2;var n=q.createLinearGradient(0,0,0,r*2);n.addColorStop(0,"orange");n.addColorStop(1,"yellow");var m=q.createLinearGradient(0,0,0,r*2);m.addColorStop(0,"orange");m.addColorStop(1,"red");q.lineWidth=g;q.lineCap="round";q.shadowColor="#999";q.shadowBlur=10;q.shadowOffsetX=-2;q.shadowOffsetY=2;q.save();q.beginPath();q.rect(-g,-g,r+g,r*2+g*2);q.clip();q.strokeStyle=n;q.beginPath();q.arc(r,r,r,f+k,i+j,false);q.stroke();q.restore();q.save();q.beginPath();q.rect(r,-g,r+g,(r*2)+g*2);q.clip();q.strokeStyle=m;q.beginPath();q.arc(r,r,r,f+k,i+j,false);q.stroke();q.restore();q.translate(-g/2-4,-g/2-4);if(p>o){setTimeout(a,30,h,p,g,l,o+0.06)}};return d})();HashtagList=(function(){function b(c){this.data=c}b.prototype.options=function(c){this.options=c;return this};var a=_.template('<ul class="hashtag-list">  <% data.list.forEach(function(item) { %>    <li><%= new HashtagItem(item).options(data.options).html() %></li>  <% }); %></ul>',{variable:"data"});b.prototype.html=function(){return a({list:this.data,options:this.options})};b.prototype.render=function(c){return $(this.html()).appendTo(c).find(".hashtag-item").each(function(){HashtagItem.drawRadial(this)})};return b})();(function(a){a.fn.hashtagItem=function(c,b){return new HashtagItem(c).options(b).render(this)};a.fn.drawRadial=function(){HashtagItem.drawRadial(this);return this};a.fn.hashtagList=function(c,b){return new HashtagList(c).options(b).render(this)}})(jQuery);